/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.5 		*/
/*  Created On : 12-sep-2022 9:22:29 PM 				*/
/*  DBMS       : MySql 						*/
/* ---------------------------------------------------- */

SET FOREIGN_KEY_CHECKS=0 
;

/* Drop Tables */

DROP TABLE IF EXISTS `ACOMPANANTE` CASCADE
;

DROP TABLE IF EXISTS `CLIENTE` CASCADE
;

DROP TABLE IF EXISTS `EMPLEADOS` CASCADE
;

DROP TABLE IF EXISTS `HABITACION` CASCADE
;

DROP TABLE IF EXISTS `RESERVA` CASCADE
;

/* Create Tables */

CREATE TABLE `ACOMPANANTE`
(
	`COD_CLIENTE` INT NULL,
	`NOMBRES` VARCHAR(50) NULL,
	`APELLIDOS` VARCHAR(50) NULL,
	`CORREO` VARCHAR(50) NULL,
	`TELEFONO` VARCHAR(50) NULL
)

;

CREATE TABLE `CLIENTE`
(
	`CODIGO` INT AUTO_INCREMENT NOT NULL,
	`CARNET` VARCHAR(50) NOT NULL,
	`CORREO` VARCHAR(50) NULL,
	`PASSWORD` VARCHAR(64) NOT NULL,
	`NOMBRES` VARCHAR(50) NULL,
	`PATERNO` VARCHAR(50) NULL,
	`MATERNO` VARCHAR(50) NULL,
	`TELEFONO` VARCHAR(50) NULL,
	`NACIONALIDAD` VARCHAR(50) NULL,
	CONSTRAINT `PK_CLIENTE` PRIMARY KEY (`CODIGO` ASC)
)

;

CREATE TABLE `EMPLEADOS`
(
	`CODIGO` INT AUTO_INCREMENT NOT NULL,
	`CARNET` VARCHAR(50) NULL,
	`NOMBRES` VARCHAR(50) NULL,
	`PATERNO` VARCHAR(50) NULL,
	`MATERNO` VARCHAR(50) NULL,
	`TELEFONO` VARCHAR(50) NULL,
	CONSTRAINT `PK_ENCARGADOS` PRIMARY KEY (`CODIGO` ASC)
)

;

CREATE TABLE `HABITACION`
(
	`COD_HABITACION` INT AUTO_INCREMENT NOT NULL,
	`NUMERO` VARCHAR(50) NULL,
	`PISO` INT NULL,
	`TIPO_DISPONIBILIDAD` VARCHAR(50) NULL,
	`TIPO_HABITACION` VARCHAR(50) NULL,
	`DESCRIPCION` VARCHAR(500) NULL,
	CONSTRAINT `PK_HABITACION` PRIMARY KEY (`COD_HABITACION` ASC)
)

;

CREATE TABLE `RESERVA`
(
	`COD_RESERVA` INT AUTO_INCREMENT NOT NULL,
	`COD_HABITACION` INT NULL,
	`COD_CLIENTE` INT NULL,
	`FECHA_INICIO` DATE NULL,
	`FECHA_FINAL` DATE NULL,
	`FECHA_RESERVA` DATE NULL,
	`COD_EMP` INT NULL,
	CONSTRAINT `PK_RESERVA` PRIMARY KEY (`COD_RESERVA` ASC)
)

;

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE `ACOMPANANTE` 
 ADD INDEX `IXFK_ACOMPANANTE_CLIENTE` (`COD_CLIENTE` ASC)
;

ALTER TABLE `RESERVA` 
 ADD INDEX `IXFK_RESERVA_HABITACION` (`COD_HABITACION` ASC)
;

ALTER TABLE `RESERVA` 
 ADD INDEX `IXFK_RESERVA_CLIENTE` (`COD_CLIENTE` ASC)
;

ALTER TABLE `RESERVA` 
 ADD INDEX `IXFK_RESERVA_EMPLEADOS` (`COD_EMP` ASC)
;

/* Create Foreign Key Constraints */

ALTER TABLE `ACOMPANANTE` 
 ADD CONSTRAINT `FK_ACOMPANANTE_CLIENTE`
	FOREIGN KEY (`COD_CLIENTE`) REFERENCES `CLIENTE` (`CODIGO`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `RESERVA` 
 ADD CONSTRAINT `FK_RESERVA_HABITACION`
	FOREIGN KEY (`COD_HABITACION`) REFERENCES `HABITACION` (`COD_HABITACION`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `RESERVA` 
 ADD CONSTRAINT `FK_RESERVA_CLIENTE`
	FOREIGN KEY (`COD_CLIENTE`) REFERENCES `CLIENTE` (`CODIGO`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `RESERVA` 
 ADD CONSTRAINT `FK_RESERVA_EMPLEADOS`
	FOREIGN KEY (`COD_EMP`) REFERENCES `EMPLEADOS` (`CODIGO`) ON DELETE Restrict ON UPDATE Restrict
;

SET FOREIGN_KEY_CHECKS=1 
;
